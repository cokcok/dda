(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{KQWd:function(t,i,e){"use strict";e.d(i,"a",function(){return n});var o=e("fXoL"),a=e("tk/3"),s=e("mPU2");let n=(()=>{class t{constructor(t,i){this.http=t,this.configSv=i}getproduct(t,i){return this.http.post(this.configSv.ip+"po_getproduct.php",{type_sql:t,category:i},{headers:{"Content-Type":"application/json"}})}getnumber(t,i){return this.http.post(this.configSv.ip+"po_getproduct.php",{type_sql:t,tmp_number:i},{headers:{"Content-Type":"application/json"}})}crudpo(t,i,e){let o;if("cancel"===i)o={id:t.id,emp_id:this.configSv.emp_id,oldtmpproduct:t.oldtmpproduct,type_sql:i,cause:e};else{let e;e="0"===t.customer_type_id.id?0:t.mtd_member_id.id,o={id:t.id,po_date:t.po_date,mtd_user_id:t.mtd_user_id.id,po_namewin:t.po_namewin,mtd_area_id:t.mtd_area_id.id,po_customertype:t.customer_type_id.id,po_customer:t.po_customer,po_customer_tel:t.po_customer_tel,mtd_member_id:e,po_green:t.po_green,po_totalproduct:t.po_totalproduct,po_discount:t.po_discount,po_total:t.po_total,po_recivedate:t.po_recivedate,mtd_shipping_id:t.mtd_shipping_id.id,po_shipping_price:t.po_shipping_price,po_address:t.po_address,po_address_place:t.po_address_place,tmpproduct:t.tmpproduct,oldtmpproduct:t.oldtmpproduct,namewin_comment:t.namewin_comment,emp_id:this.configSv.emp_id,type_sql:i}}return this.http.post(this.configSv.ip+"po.php",o,{headers:{"Content-Type":"application/json"}})}getpo(t,i,e=9999999999){let o;return o=void 0===t.typeserch_id.id?t.typeserch_id:t.typeserch_id.id,this.http.post(this.configSv.ip+"po_getproduct.php",{padding:i,limit:e,typeserch:o,serchtxt:t.txtserach,type_sql:"readpo"},{headers:{"Content-Type":"application/json"}})}getpo_edit(t){let i;return i={id:t,type_sql:"read"},this.http.post(this.configSv.ip+"po.php",i,{headers:{"Content-Type":"application/json"}})}getpoassign(t,i,e,o=9999999999){return this.http.post(this.configSv.ip+"po_assign.php",{padding:e,limit:o,typeserch:i.typeserch_id,serchtxt:i.txtserach,po_assigndate:i.po_assigndate,type_sql:t},{headers:{"Content-Type":"application/json"}})}crudpoassign(t,i,e){let o;return o="delete"===i?{id:t.id,emp_id:this.configSv.emp_id,dataall:t.dataall,total:t.total,cause:e,type_sql:i}:{po_assigndate:t.po_assigndate,seq:t.seq,dataall:t.dataall,datasome:t.datasome,total:t.total,emp_id:this.configSv.emp_id,type_sql:i},this.http.post(this.configSv.ip+"po_assign.php",o,{headers:{"Content-Type":"application/json"}})}getpoassignreport(t,i,e,o){return this.http.post(this.configSv.ip+"po_assign_report.php",{id:i,type_sql:t,padding:e,limit:o},{headers:{"Content-Type":"application/json"}})}getpoassigncancel(t,i,e,o){let a;return a=void 0===i.typeserch_id.id?null:i.typeserch_id.id,this.http.post(this.configSv.ip+"po_assign_report.php",{type_sql:t,padding:e,limit:o,typeserch:a,serchtxt:i.txtserach},{headers:{"Content-Type":"application/json"}})}getcfcupon(t,i){return this.http.post(this.configSv.ip+"cfcupon.php",{id:i.id,po_todaydate:i.po_todaydate,po_assigndate:i.po_assigndate,type_sql:t},{headers:{"Content-Type":"application/json"}})}crudcfcupon(t,i,e,o){let a;return a="restore"===i?{assignid:t[0].assign_id,emp_id:this.configSv.emp_id,cause:e,type_restore:o,type_sql:i}:{id:t.id,total:t.total,dataall:t.dataall,emp_id:this.configSv.emp_id,type_sql:i},this.http.post(this.configSv.ip+"cfcupon.php",a,{headers:{"Content-Type":"application/json"}})}getcfmanage(t,i,e,o){let a;return a=void 0===i.typeserch_id.id?null:i.typeserch_id.id,this.http.post(this.configSv.ip+"cfmanage.php",{type_sql:t,padding:e,limit:o,typeserch:a,serchtxt:i.txtserach},{headers:{"Content-Type":"application/json"}})}crudcfmanage(t,i,e,o){let a;return"restore"===i&&(a={mainassignid:t[0].mainassignid,assignid:t[0].assign_id,poid:t[0].poid,total:t[0].total,emp_id:this.configSv.emp_id,cause:e,type_restore:o,type_sql:i}),this.http.post(this.configSv.ip+"cfmanage.php",a,{headers:{"Content-Type":"application/json"}})}getcfgreen(t,i){return this.http.post(this.configSv.ip+"cfgreen.php",{id:i.id,po_todaydate:i.po_todaydate,po_assigndate:i.po_assigndate,type_sql:t},{headers:{"Content-Type":"application/json"}})}crudcfgreen(t,i,e,o){let a;return a={id:t.id,total:t.total,dataall:t.dataall,emp_id:this.configSv.emp_id,type_sql:i},this.http.post(this.configSv.ip+"cfgreen.php",a,{headers:{"Content-Type":"application/json"}})}getcfinstall(t,i){return this.http.post(this.configSv.ip+"cfinstall.php",{id:i.id,po_todaydate:i.po_todaydate,po_assigndate:i.po_assigndate,type_sql:t},{headers:{"Content-Type":"application/json"}})}crudcfinstall(t,i,e,o){let a;return a={id:t.id,total:t.total,dataall:t.dataall,emp_id:this.configSv.emp_id,type_sql:i},this.http.post(this.configSv.ip+"cfinstall.php",a,{headers:{"Content-Type":"application/json"}})}getpotf(t,i,e,o=9999999999){return this.http.post(this.configSv.ip+"potransfer.php",{padding:e,limit:o,typeserch:i.typeserch_id,serchtxt:i.txtserach,po_recivedate:i.po_recivedate,type_sql:t},{headers:{"Content-Type":"application/json"}})}}return t.\u0275fac=function(i){return new(i||t)(o.Ub(a.a),o.Ub(s.a))},t.\u0275prov=o.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},ptzl:function(t,i,e){"use strict";e.d(i,"a",function(){return y});var o=e("mrSG"),a=e("wd/R"),s=(e("EOgW"),e("fXoL")),n=e("mPU2"),c=e("KQWd"),p=e("3Pt+"),l=e("TEn/"),r=e("m/P+"),d=e("ofXK"),b=e("cZdB");function h(t,i){if(1&t){const t=s.Rb();s.Qb(0,"ion-buttons",9),s.Qb(1,"ion-button",1),s.Yb("click",function(){return s.tc(t),s.ac().submitForm()}),s.Lb(2,"ion-icon",10),s.Pb(),s.Pb()}}function _(t,i){if(1&t){const t=s.Rb();s.Qb(0,"ion-button",1),s.Yb("click",function(){s.tc(t);const i=s.ac().$implicit;return s.ac(3).showImg(i.detail_id,i.name)}),s.Lb(1,"ion-icon",22),s.Pb()}}function u(t,i){if(1&t&&(s.Qb(0,"div",19),s.Lb(1,"ion-img",20),s.zc(2,_,2,0,"ion-button",21),s.Pb()),2&t){const t=i.$implicit;s.zb(1),s.hc("src",t.urlresize),s.zb(1),s.hc("ngIf",void 0!==t.detail_id)}}function g(t,i){if(1&t&&(s.Qb(0,"ion-row"),s.Qb(1,"ion-col",16),s.Qb(2,"div"),s.Qb(3,"ion-row"),s.Qb(4,"ion-text",17),s.Bc(5," \u0e20\u0e32\u0e1e\u0e1b\u0e23\u0e30\u0e01\u0e2d\u0e1a "),s.Pb(),s.Pb(),s.Qb(6,"div"),s.zc(7,u,3,2,"div",18),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&t){const t=s.ac().$implicit;s.zb(7),s.hc("ngForOf",t.picresizbase64List)}}function m(t,i){if(1&t){const t=s.Rb();s.Qb(0,"ion-card"),s.Qb(1,"ion-item"),s.Qb(2,"ion-checkbox",11),s.Yb("click",function(){s.tc(t);const e=i.index,o=i.$implicit,a=s.ac();return a.selectData(e,a.data[e],o.status_checked)})("ngModelChange",function(e){return s.tc(t),i.$implicit.status_checked=e}),s.Pb(),s.Qb(3,"ion-row"),s.Qb(4,"ion-col"),s.Qb(5,"ion-label",12),s.Bc(6),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(7,"ion-item"),s.Qb(8,"ion-grid",5),s.Qb(9,"ion-row"),s.Qb(10,"ion-col"),s.Qb(11,"ion-label"),s.Qb(12,"u",13),s.Bc(13,"\u0e1c\u0e39\u0e49\u0e02\u0e32\u0e22:"),s.Pb(),s.Bc(14),s.Pb(),s.Pb(),s.Qb(15,"ion-col"),s.Qb(16,"ion-label"),s.Qb(17,"u",13),s.Bc(18,"Tel:"),s.Pb(),s.Bc(19),s.Pb(),s.Pb(),s.Qb(20,"ion-col"),s.Qb(21,"ion-label"),s.Qb(22,"u",13),s.Bc(23,"\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e31\u0e48\u0e07\u0e0b\u0e37\u0e49\u0e2d:"),s.Pb(),s.Bc(24),s.Pb(),s.Pb(),s.Pb(),s.Qb(25,"ion-row"),s.Qb(26,"ion-col"),s.Qb(27,"ion-label"),s.Qb(28,"u",13),s.Bc(29,"\u0e0a\u0e37\u0e48\u0e2d\u0e27\u0e34\u0e19:"),s.Pb(),s.Bc(30),s.Pb(),s.Pb(),s.Qb(31,"ion-col"),s.Qb(32,"ion-label"),s.Qb(33,"u",13),s.Bc(34,"\u0e40\u0e02\u0e15:"),s.Pb(),s.Bc(35),s.Pb(),s.Pb(),s.Qb(36,"ion-col"),s.Qb(37,"ion-label"),s.Qb(38,"u",13),s.Bc(39,"\u0e40\u0e1a\u0e2d\u0e23\u0e4c/\u0e2a\u0e35:"),s.Pb(),s.Bc(40),s.Pb(),s.Pb(),s.Pb(),s.Qb(41,"ion-row"),s.Qb(42,"ion-col"),s.Qb(43,"ion-label"),s.Qb(44,"u",13),s.Bc(45,"\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32:"),s.Pb(),s.Bc(46),s.Pb(),s.Pb(),s.Qb(47,"ion-col"),s.Qb(48,"ion-label"),s.Qb(49,"u",13),s.Bc(50,"\u0e02\u0e19\u0e32\u0e14:"),s.Pb(),s.Bc(51),s.Pb(),s.Pb(),s.Qb(52,"ion-col"),s.Qb(53,"ion-label"),s.Qb(54,"u"),s.Bc(55,"\u0e27\u0e31\u0e19\u0e19\u0e31\u0e14\u0e23\u0e31\u0e1a:"),s.Pb(),s.Bc(56),s.Pb(),s.Pb(),s.Pb(),s.Qb(57,"ion-row"),s.Qb(58,"ion-col"),s.Qb(59,"ion-label"),s.Qb(60,"u",13),s.Bc(61,"\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32\u0e2d\u0e37\u0e48\u0e19\u0e46:"),s.Pb(),s.Bc(62),s.Pb(),s.Pb(),s.Qb(63,"ion-col"),s.Qb(64,"ion-label"),s.Qb(65,"u",13),s.Bc(66,"\u0e2b\u0e21\u0e32\u0e22\u0e40\u0e2b\u0e15\u0e38:"),s.Pb(),s.Bc(67),s.Pb(),s.Pb(),s.Pb(),s.Qb(68,"ion-row"),s.Qb(69,"ion-col"),s.Qb(70,"ion-label"),s.Qb(71,"u",13),s.Bc(72,"\u0e2a\u0e16\u0e32\u0e19\u0e30\u0e1b\u0e31\u0e01\u0e40\u0e25\u0e02 :"),s.Pb(),s.Qb(73,"span",14),s.Bc(74),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.zc(75,g,8,1,"ion-row",15),s.Pb(),s.Pb(),s.Pb()}if(2&t){const t=i.$implicit,e=s.ac();s.zb(2),s.hc("disabled",t.disable_checked)("ngModel",t.status_checked),s.zb(4),s.Cc(t.po_running),s.zb(8),s.Dc(" ",t.name,""),s.zb(5),s.Dc(" ",t.po_customer_tel,""),s.zb(5),s.Dc(" ",t.po_date,""),s.zb(6),s.Dc(" ",t.po_namewin,""),s.zb(5),s.Dc(" ",t.area_name,""),s.zb(5),s.Fc(" ",t.podetail_number,"/",t.colorfront,"-",t.colorback,""),s.zb(6),s.Dc(" ",t.product_name,""),s.zb(5),s.Dc(" ",t.size,""),s.zb(1),s.yc("background-color",e.getColor(t.po_recivedate)),s.zb(4),s.Dc(" ",t.po_recivedate,""),s.zb(6),s.Dc(" ",t.etc,""),s.zb(5),s.Dc(" ",t.podetail_comment,""),s.zb(6),s.hc("ngClass",0==t.poassign_number?"postatus_alert":"postatus_ok"),s.zb(1),s.Dc(" ",t.poassign_numbertxt,""),s.zb(1),s.hc("ngIf",t.picresizbase64List.length>0)}}const f=a;let y=(()=>{class t{constructor(t,i,e,o,a,s){this.configSv=t,this.poSv=i,this.formBuilder=e,this.modalCtrl=o,this.alertCtrl=a,this.iab=s,this.isSubmitted=!1,this.data=[],this.page=0,this.limit=50,this.maxdatalimit=0,this.dataallarray=[],this.checkallstatus=!1,this.data_check=[]}ngOnInit(){this.ionicForm=this.formBuilder.group({id:[this.id],total:[this.total],dataall:[]}),this.loaddata(0)}dismissModal(){this.modalCtrl.dismiss(this.assign_statusAll,"confirm")}loaddata(t,i){0==t&&(this.data=[]),this.sub=this.poSv.getcfcupon("readid",this.ionicForm.value).subscribe(t=>{null!==t?(this.data=t.data_detail.map(t=>Object.assign({},t)),i&&i.target.complete()):this.maxpadding=0})}getColor(t){let i=f(t,"DD/MM/YYYY").isoWeekday();return this.configSv.colortxt[i]}showImg(t,i){this.iab.create(this.configSv.ip+"po01/productdetail/"+t+"/"+i).show()}selectDataAll(){if(!1===this.checkallstatus){this.data_check=this.data.filter(t=>0==t.status_checked);for(var t=0;t<this.data_check.length;t++)this.data_check[t].status_checked=!0;this.dataallarray=this.data_check,this.checkallstatus=!0,this.checkall=!1}else{for(t=0;t<this.data_check.length;t++)this.data_check[t].status_checked=!1;this.checkallstatus=!1,this.dataallarray=[]}}selectData(t,i,e){e?(this.dataallarray=this.dataallarray.filter(t=>t.assign_id!==i.assign_id),0===this.dataallarray.length&&(this.checkall=!1)):this.dataallarray.push(i)}submitForm(){return Object(o.a)(this,void 0,void 0,function*(){this.ionicForm.controls.dataall.setValue(this.dataallarray),(yield this.alertCtrl.create({header:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e43\u0e19\u0e01\u0e32\u0e23\u0e1b\u0e23\u0e31\u0e1a\u0e2a\u0e16\u0e32\u0e19\u0e30\u0e01\u0e32\u0e23\u0e1b\u0e31\u0e01",buttons:[{text:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",handler:t=>{}},{text:"\u0e15\u0e01\u0e25\u0e07",handler:t=>{this.sub=this.poSv.crudcfcupon(this.ionicForm.value,"insert").subscribe(t=>{null!==t&&"ok"===t.status&&(this.assign_statusAll=t.id,this.compareArray(this.data,this.dataallarray),this.configSv.ChkformAlert(t.message),this.dataallarray=[],this.checkallstatus=!1,this.checkall=!1)},t=>{console.log(JSON.stringify(t))})}}]})).present()})}compareArray(t,i){t.forEach(t=>{i.forEach(i=>{t.assign_id==i.assign_id&&(t.disable_checked=!0,t.status_checked=!0,t.poassign_number=1,t.poassign_numbertxt="\u0e07\u0e32\u0e19\u0e1b\u0e31\u0e01\u0e40\u0e25\u0e02\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08")})})}}return t.\u0275fac=function(i){return new(i||t)(s.Kb(n.a),s.Kb(c.a),s.Kb(p.b),s.Kb(l.ab),s.Kb(l.a),s.Kb(r.a))},t.\u0275cmp=s.Eb({type:t,selectors:[["app-pocfcupon02"]],inputs:{id:"id",assign_date:"assign_date",seq:"seq",total:"total"},decls:24,vars:10,consts:[["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back-outline"],["slot","primary",4,"ngIf"],["placeholder","\u0e04\u0e49\u0e19\u0e2b\u0e32...","animated","true",3,"ngModel","ngModelChange"],["fixed",""],["color","danger","slot","start",3,"ngModel","ngModelChange","click"],[1,"postatus_alert"],[4,"ngFor","ngForOf"],["slot","primary"],["slot","icon-only","src","./assets/icons/save.svg"],["color","dark","slot","start",3,"disabled","ngModel","click","ngModelChange"],[1,"showlabelheader"],[1,"showlabel"],[3,"ngClass"],[4,"ngIf"],["size","12"],["color","primary"],["style","display: inline-block;",4,"ngFor","ngForOf"],[2,"display","inline-block"],[2,"width","100px","height","100px",3,"src"],[3,"click",4,"ngIf"],["slot","icon-only","size","small","name","search"]],template:function(t,i){1&t&&(s.Qb(0,"ion-header"),s.Qb(1,"ion-toolbar"),s.Qb(2,"ion-buttons",0),s.Qb(3,"ion-button",1),s.Yb("click",function(){return i.dismissModal()}),s.Lb(4,"ion-icon",2),s.Pb(),s.Pb(),s.Qb(5,"ion-title"),s.Bc(6),s.Pb(),s.zc(7,h,3,0,"ion-buttons",3),s.Pb(),s.Pb(),s.Qb(8,"ion-content"),s.Qb(9,"div"),s.Qb(10,"ion-searchbar",4),s.Yb("ngModelChange",function(t){return i.filterTerm=t}),s.Pb(),s.Qb(11,"ion-grid",5),s.Qb(12,"ion-row"),s.Qb(13,"ion-col"),s.Qb(14,"ion-item"),s.Qb(15,"ion-checkbox",6),s.Yb("ngModelChange",function(t){return i.checkall=t})("click",function(){return i.selectDataAll()}),s.Pb(),s.Qb(16,"ion-label"),s.Bc(17,"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14"),s.Pb(),s.Pb(),s.Pb(),s.Qb(18,"ion-col"),s.Qb(19,"ion-item"),s.Qb(20,"ion-label",7),s.Bc(21),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.zc(22,m,76,21,"ion-card",8),s.bc(23,"filter"),s.Pb(),s.Pb()),2&t&&(s.zb(6),s.Ec("\u0e07\u0e32\u0e19\u0e1b\u0e31\u0e01\u0e40\u0e25\u0e02\u0e02\u0e2d\u0e07\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48 ",i.assign_date," \u0e04\u0e23\u0e31\u0e49\u0e07\u0e17\u0e35\u0e48 ",i.seq,""),s.zb(1),s.hc("ngIf",i.dataallarray.length>0),s.zb(3),s.hc("ngModel",i.filterTerm),s.zb(5),s.hc("ngModel",i.checkall),s.zb(6),s.Dc("\u0e21\u0e35\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e17\u0e35\u0e48\u0e40\u0e25\u0e37\u0e2d\u0e01 ",i.dataallarray.length," \u0e23\u0e32\u0e22\u0e01\u0e32\u0e23"),s.zb(1),s.hc("ngForOf",s.dc(23,7,i.data,i.filterTerm)))},directives:[l.p,l.U,l.h,l.g,l.q,l.T,d.k,l.m,l.M,l.ib,p.h,p.j,l.o,l.L,l.l,l.v,l.j,l.b,l.B,d.j,l.i,d.i,l.R,l.r],pipes:[b.a],styles:[""]}),t})()}}]);