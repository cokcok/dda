(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{OOBU:function(t,i,a){"use strict";a.r(i),a.d(i,"Poassign01PageModule",function(){return F});var o=a("ofXK"),e=a("3Pt+"),n=a("TEn/"),c=a("tyNb"),r=a("mrSG"),s=a("wd/R"),l=(a("EOgW"),a("LG92")),d=a("fXoL"),b=a("mPU2"),h=a("KQWd"),m=a("hfN1"),u=a("cZdB");function p(t,i){if(1&t){const t=d.Rb();d.Qb(0,"ion-buttons",15),d.Qb(1,"ion-button",16),d.Yb("click",function(){return d.tc(t),d.ac().submitForm()}),d.Lb(2,"ion-icon",17),d.Pb(),d.Pb()}}function g(t,i){1&t&&(d.Qb(0,"span",18),d.Bc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e23\u0e30\u0e1a\u0e38 \u0e04\u0e33\u0e04\u0e49\u0e19\u0e2b\u0e32 "),d.Pb())}function f(t,i){if(1&t&&(d.Qb(0,"ion-row",19),d.Qb(1,"ion-col"),d.Bc(2),d.Pb(),d.Pb()),2&t){const t=d.ac();d.zb(2),d.Dc(" \u0e1e\u0e1a\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e17\u0e35\u0e48\u0e04\u0e49\u0e19\u0e2b\u0e32 \u0e08\u0e33\u0e19\u0e27\u0e19 ",t.maxdatalimit," \u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25 ")}}function P(t,i){if(1&t){const t=d.Rb();d.Qb(0,"ion-checkbox",24),d.Yb("click",function(){d.tc(t);const i=d.ac(),a=i.index,o=i.$implicit,e=d.ac();return e.selectData(a,e.data[a],o.checkall)})("ngModelChange",function(i){return d.tc(t),d.ac().$implicit.checkall=i}),d.Pb()}if(2&t){const t=d.ac().$implicit;d.hc("ngModel",t.checkall)}}function y(t,i){if(1&t){const t=d.Rb();d.Qb(0,"ion-checkbox",25),d.Yb("click",function(){d.tc(t);const i=d.ac(),a=i.index,o=i.$implicit,e=d.ac();return e.selectDatasome(a,e.data[a],o.checksomedata)})("ngModelChange",function(i){return d.tc(t),d.ac().$implicit.checksomedata=i}),d.Pb()}if(2&t){const t=d.ac().$implicit;d.hc("ngModel",t.checksomedata)}}function k(t,i){if(1&t){const t=d.Rb();d.Qb(0,"ion-card"),d.Qb(1,"ion-row"),d.Qb(2,"ion-col"),d.Qb(3,"ion-item"),d.zc(4,P,1,1,"ion-checkbox",20),d.zc(5,y,1,1,"ion-checkbox",21),d.Qb(6,"ion-label",22),d.Bc(7),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(8,"ion-row"),d.Qb(9,"ion-col"),d.Qb(10,"ion-item"),d.Qb(11,"ion-label",22),d.Bc(12),d.Pb(),d.Qb(13,"ion-button",23),d.Yb("click",function(){d.tc(t);const a=i.$implicit;return d.ac().View(a.po_recivedate)}),d.Bc(14),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb()}if(2&t){const t=i.$implicit;d.zb(4),d.hc("ngIf",!1===t.checksomedata),d.zb(1),d.hc("ngIf",!0===t.checksomedata),d.zb(2),d.Dc("\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e19\u0e31\u0e14\u0e23\u0e31\u0e1a ",t.po_recivedate,""),d.zb(5),d.Dc(" \u0e08\u0e33\u0e19\u0e27\u0e19\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14 ",t.countid," \u0e23\u0e32\u0e22\u0e01\u0e32\u0e23"),d.zb(2),d.Dc("\u0e14\u0e39\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e19\u0e31\u0e14\u0e23\u0e31\u0e1a ",t.po_recivedate,"")}}const Q=s,v=[{path:"",component:(()=>{class t{constructor(t,i,a,o,e){this.configSv=t,this.poSv=i,this.formBuilder=a,this.modalCtrl=o,this.alertCtrl=e,this.isSubmitted=!1,this.data=[],this.page=0,this.limit=50,this.maxdatalimit=0,this.datePickerObj={},this.dataallarray=[],this.datasomearray=[]}ngOnInit(){this.ionicForm=this.formBuilder.group({typeserch_id:["9"],txtserach:["",[e.l.required]],po_assigndate:[Q().format("DD/MM/YYYY"),[e.l.required]],seq:[],dataall:[],datasome:[],total:[]}),this.fndate(),this.loaddata(0)}get errorControl(){return this.ionicForm.controls}fndate(){this.datePickerObj={inputDate:"",closeOnSelect:!0,setLabel:"\u0e40\u0e25\u0e37\u0e2d\u0e01",todayLabel:"\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e1b\u0e31\u0e08\u0e08\u0e38\u0e1a\u0e31\u0e19",closeLabel:"\u0e1b\u0e34\u0e14",monthsList:["\u0e21.\u0e04.","\u0e01.\u0e1e.","\u0e21\u0e35.\u0e04.","\u0e40\u0e21.\u0e22.","\u0e1e.\u0e04.","\u0e21\u0e34.\u0e22.","\u0e01.\u0e04.","\u0e2a.\u0e04.","\u0e01.\u0e22.","\u0e15.\u0e04.","\u0e1e.\u0e22.","\u0e18.\u0e04."],weeksList:["\u0e2d\u0e32","\u0e08","\u0e2d","\u0e1e","\u0e1e\u0e24","\u0e28","\u0e2a"],dateFormat:"DD/MM/YYYY",btnProperties:{expand:"block",fill:"",size:"",disabled:"",strong:"",color:"success"}}}loaddata(t,i){0==t&&(this.data=[]),this.sub=this.poSv.getpoassign("read",this.ionicForm.value,t,this.limit).subscribe(t=>{null!==t?(this.maxpadding=t.maxpadding,this.maxdatalimit=t.limit,this.ionicForm.controls.seq.setValue(t.seq),this.data=this.data.concat(t.data_detail.map(t=>Object.assign({},t))),i&&i.target.complete()):this.maxpadding=0})}SearchData(t,i){0==t&&(this.data=[]),this.ionicForm.controls.typeserch_id.setValue(0),this.sub=this.poSv.getpoassign("read",this.ionicForm.value,t,this.limit).subscribe(t=>{null!==t?(this.maxpadding=t.maxpadding,this.maxdatalimit=t.limit,this.data=this.data.concat(t.data_detail.map(t=>Object.assign({},t))),i&&i.target.complete()):(this.data=[],this.maxpadding=0,this.maxdatalimit=0)})}doInfinite(t){this.page++,9==this.ionicForm.controls.typeserch_id.value?this.loaddata(this.page*this.limit,t):this.SearchData(this.page*this.limit,t),this.page===this.maxpadding&&(t.target.disabled=!0)}selectData(t,i,a){a?this.dataallarray=this.dataallarray.filter(t=>t.po_recivedate!==i.po_recivedate):this.dataallarray.push(i)}selectDatasome(t,i,a){a&&(this.datasomearray=this.datasomearray.filter(t=>t.po_recivedate!==i.po_recivedate))}View(t){return Object(r.a)(this,void 0,void 0,function*(){let i=this.data.filter(i=>i.po_recivedate==t),a=this.datasomearray.filter(i=>i.po_recivedate==t);const o=yield this.modalCtrl.create({component:l.a,cssClass:"my-modal",componentProps:{recivedate:t,itemsomedata:a}});yield o.present();const{data:e,role:n}=yield o.onWillDismiss();"somedata"===n&&(this.datasomearray=e,i[0].checksomedata=!0)})}submitForm(){return Object(r.a)(this,void 0,void 0,function*(){this.ionicForm.controls.dataall.setValue(this.dataallarray),this.ionicForm.controls.datasome.setValue(this.datasomearray);let t=0;t=this.dataallarray.reduce((t,i)=>t+Number(i.countid),0)+this.datasomearray.reduce((t,i)=>t+Number(i.qty),0),this.ionicForm.controls.total.setValue(t),console.log(this.ionicForm.value),(yield this.alertCtrl.create({header:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e43\u0e19\u0e01\u0e32\u0e23\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01",buttons:[{text:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",handler:t=>{}},{text:"\u0e15\u0e01\u0e25\u0e07",handler:t=>{this.sub=this.poSv.crudpoassign(this.ionicForm.value,"insert").subscribe(t=>{null!==t&&"ok"===t.status&&(this.configSv.ChkformAlert(t.message),this.dataallarray=[],this.datasomearray=[],this.loaddata(0))},t=>{console.log(JSON.stringify(t))})}}]})).present()})}}return t.\u0275fac=function(i){return new(i||t)(d.Kb(b.a),d.Kb(h.a),d.Kb(e.b),d.Kb(n.ab),d.Kb(n.a))},t.\u0275cmp=d.Eb({type:t,selectors:[["app-poassign01"]],decls:38,vars:11,consts:[["slot","start"],["slot","primary",4,"ngIf"],["novalidate","",3,"formGroup"],["fixed",""],["position","floating",1,"showlabel"],["formControlName","txtserach","readonly","","type","text",3,"liIonic4Datepicker"],["class","error",4,"ngIf"],["expand","block","shape","round",3,"disabled","click"],["class","content_alert",4,"ngIf"],["formControlName","po_assigndate","readonly","","type","text"],["formControlName","seq","readonly",""],["placeholder","\u0e04\u0e49\u0e19\u0e2b\u0e32...","animated","true",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."],["slot","primary"],[3,"click"],["slot","icon-only","src","./assets/icons/save.svg"],[1,"error"],[1,"content_alert"],["color","dark","slot","start",3,"ngModel","click","ngModelChange",4,"ngIf"],["color","tertiary","slot","start",3,"ngModel","click","ngModelChange",4,"ngIf"],[1,"showlabelheader"],["fill","outline","slot","end","color","success",3,"click"],["color","dark","slot","start",3,"ngModel","click","ngModelChange"],["color","tertiary","slot","start",3,"ngModel","click","ngModelChange"]],template:function(t,i){1&t&&(d.Qb(0,"ion-header"),d.Qb(1,"ion-toolbar"),d.Qb(2,"ion-buttons",0),d.Lb(3,"ion-menu-button"),d.Pb(),d.Qb(4,"ion-title"),d.Bc(5,"\u0e21\u0e2d\u0e1a\u0e2b\u0e21\u0e32\u0e22\u0e07\u0e32\u0e19\u0e15\u0e32\u0e21\u0e43\u0e1a\u0e2a\u0e31\u0e48\u0e07\u0e0b\u0e37\u0e49\u0e2d"),d.Pb(),d.zc(6,p,3,0,"ion-buttons",1),d.Pb(),d.Pb(),d.Qb(7,"form",2),d.Qb(8,"ion-grid",3),d.Qb(9,"ion-row"),d.Qb(10,"ion-col"),d.Qb(11,"ion-item"),d.Qb(12,"ion-label",4),d.Bc(13,"\u0e04\u0e49\u0e19\u0e2b\u0e32\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e19\u0e31\u0e14\u0e23\u0e31\u0e1a"),d.Pb(),d.Lb(14,"ion-input",5),d.zc(15,g,2,0,"span",6),d.Pb(),d.Pb(),d.Qb(16,"ion-col"),d.Qb(17,"ion-button",7),d.Yb("click",function(){return i.SearchData(0)}),d.Bc(18," \u0e04\u0e49\u0e19\u0e2b\u0e32\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25 "),d.Pb(),d.Pb(),d.Pb(),d.zc(19,f,3,1,"ion-row",8),d.Qb(20,"ion-row"),d.Qb(21,"ion-col"),d.Qb(22,"ion-item"),d.Qb(23,"ion-label",4),d.Bc(24,"\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48\u0e21\u0e2d\u0e1a\u0e2b\u0e21\u0e32\u0e22"),d.Pb(),d.Lb(25,"ion-input",9),d.Pb(),d.Pb(),d.Qb(26,"ion-col"),d.Qb(27,"ion-item"),d.Qb(28,"ion-label",4),d.Bc(29,"\u0e04\u0e23\u0e31\u0e49\u0e07\u0e17\u0e35\u0e48 "),d.Pb(),d.Lb(30,"ion-input",10),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(31,"ion-content"),d.Qb(32,"div"),d.Qb(33,"ion-searchbar",11),d.Yb("ngModelChange",function(t){return i.filterTerm=t}),d.Pb(),d.zc(34,k,15,5,"ion-card",12),d.bc(35,"filter"),d.Qb(36,"ion-infinite-scroll",13),d.Yb("ionInfinite",function(t){return i.doInfinite(t)}),d.Lb(37,"ion-infinite-scroll-content",14),d.Pb(),d.Pb(),d.Pb()),2&t&&(d.zb(6),d.hc("ngIf",i.dataallarray.length>0||i.datasomearray.length>0),d.zb(1),d.hc("formGroup",i.ionicForm),d.zb(7),d.hc("liIonic4Datepicker",i.datePickerObj),d.zb(1),d.hc("ngIf",i.isSubmitted&&(null==i.errorControl.txtserach.errors?null:i.errorControl.txtserach.errors.required)),d.zb(2),d.hc("disabled",i.ionicForm.invalid),d.zb(2),d.hc("ngIf","9"!==i.ionicForm.controls.typeserch_id.value),d.zb(14),d.hc("ngModel",i.filterTerm),d.zb(1),d.hc("ngForOf",d.dc(35,8,i.data,i.filterTerm)))},directives:[n.p,n.U,n.h,n.F,n.T,o.k,e.m,e.i,e.d,n.o,n.L,n.l,n.v,n.B,n.u,n.ib,e.h,e.c,m.b,n.g,n.m,n.M,e.j,o.j,n.s,n.t,n.q,n.i,n.j,n.b],pipes:[u.a],styles:[""]}),t})()}];let x=(()=>{class t{}return t.\u0275mod=d.Ib({type:t}),t.\u0275inj=d.Hb({factory:function(i){return new(i||t)},imports:[[c.j.forChild(v)],c.j]}),t})(),F=(()=>{class t{}return t.\u0275mod=d.Ib({type:t}),t.\u0275inj=d.Hb({factory:function(i){return new(i||t)},imports:[[o.b,e.e,n.W,x,e.k,m.a,u.b]]}),t})()}}]);