!function(){function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var e=[],n=!0,o=!1,r=void 0;try{for(var c,a=t[Symbol.iterator]();!(n=(c=a.next()).done)&&(e.push(c.value),!i||e.length!==i);n=!0);}catch(s){o=!0,r=s}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}return e}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}function e(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function n(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{aoXZ:function(i,o,r){"use strict";r.r(o),r.d(o,"MtdproductPageModule",function(){return S});var c=r("ofXK"),a=r("3Pt+"),s=r("TEn/"),l=r("tyNb"),u=r("mrSG"),b=r("fXoL"),d=r("84vV"),p=r("mPU2"),f=r("44PX"),m=r("JmBq"),h=r("cZdB"),g=["fileIngimg"];function v(t,i){1&t&&(b.Qb(0,"span",28),b.Bc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e23\u0e30\u0e1a\u0e38 \u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32 "),b.Pb())}function y(t,i){1&t&&(b.Qb(0,"span",28),b.Bc(1," \u0e01\u0e23\u0e38\u0e13\u0e32\u0e23\u0e30\u0e1a\u0e38 \u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32 "),b.Pb())}function _(t,i){if(1&t){var e=b.Rb();b.Qb(0,"div",29),b.Lb(1,"ion-img",30),b.Qb(2,"ion-button",2),b.Yb("click",function(){b.tc(e);var t=i.$implicit;return b.ac().delImg(t.id)}),b.Lb(3,"ion-icon",31),b.Pb(),b.Pb()}if(2&t){var n=i.$implicit;b.zb(1),b.hc("src",n.url)}}function P(t,i){if(1&t){var e=b.Rb();b.Qb(0,"ion-item-option",37),b.Yb("click",function(){b.tc(e);var t=b.ac().$implicit;return b.ac().cancelData(t.id)}),b.Lb(1,"ion-icon",38),b.Bc(2," \u0e25\u0e1a "),b.Pb()}}function Q(t,i){if(1&t){var e=b.Rb();b.Qb(0,"ion-item-sliding",32),b.Yb("click",function(){b.tc(e);var t=i.$implicit;return b.ac().selectData(t.id)}),b.Qb(1,"ion-item"),b.Qb(2,"ion-label"),b.Qb(3,"ion-text",33),b.Qb(4,"h3"),b.Bc(5),b.Pb(),b.Qb(6,"h3"),b.Bc(7),b.Pb(),b.Pb(),b.Pb(),b.Qb(8,"ion-badge",34),b.Bc(9),b.Pb(),b.Pb(),b.Qb(10,"ion-item-options"),b.Qb(11,"ion-item-option",2),b.Yb("click",function(){b.tc(e);var t=i.$implicit;return b.ac().addData(t.id)}),b.Lb(12,"ion-icon",35),b.Bc(13," \u0e40\u0e1e\u0e34\u0e48\u0e21\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32 "),b.Pb(),b.zc(14,P,3,0,"ion-item-option",36),b.Pb(),b.Pb()}if(2&t){var n=i.$implicit,o=i.index;b.hc("ngClass",n.highlight?"newdata":""),b.zb(5),b.Fc("\u0e25\u0e33\u0e14\u0e31\u0e1a\u0e17\u0e35\u0e48 ",o+1," \u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32 : ",n.product_name," \u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32: ",n.product_type_name,""),b.zb(2),b.Fc("\u0e41\u0e1a\u0e1a : ",n.product_pattern," \u0e23\u0e48\u0e38\u0e19 : ",n.product_model," \u0e2a\u0e35 : ",n.product_color,""),b.zb(2),b.Cc(n.id),b.zb(5),b.hc("ngIf",0==n.number_qty)}}var k,w,F,C=[{path:"",component:(k=function(){function i(t,n,o,r,c){e(this,i),this.mtdSv=t,this.formBuilder=n,this.configSv=o,this.alertCtrl=r,this.navCtrl=c,this.isSubmitted=!1,this.data=[],this.page=0,this.maxpadding=0,this.limit=50,this.picpreview=[],this.indexpic=0}var o,r,c;return o=i,(r=[{key:"ngOnInit",value:function(){this.portControl=this.formBuilder.control("",a.l.required),this.picresizbase64Array=this.formBuilder.array([]),this.ionicForm=this.formBuilder.group({id:[""],product_name:["",[a.l.required]],product_desc:[""],product_pattern:[""],product_model:[""],product_color:[""],product_type_id:this.portControl,product_type_name:[""],number_qty:[""],picresizbase64List:this.picresizbase64Array,highlight:[""]}),this.loaddata_producttype(this.page),this.loaddata(this.page)}},{key:"loaddata_producttype",value:function(t,i){var e=this;this.sub=this.mtdSv.getmtd(2,t).subscribe(function(t){null!==t&&(e.ports=t.data_detail.map(function(t){return Object.assign({},t)}))})}},{key:"submitForm",value:function(){var i,e=this;if(this.isSubmitted=!0,!this.ionicForm.valid)return console.log("Please provide all the required values!"),!1;i=this.ionicForm.controls.id.value?"update":"insert",this.sub=this.mtdSv.crudmtdproduct(this.ionicForm.value,i).subscribe(function(n){null!==n&&("insert"===i?"ok"===n.status?e.data.unshift({id:n.id,product_name:e.ionicForm.controls.product_name.value,product_desc:e.ionicForm.controls.product_desc.value,product_pattern:e.ionicForm.controls.product_pattern.value,product_model:e.ionicForm.controls.product_model.value,product_color:e.ionicForm.controls.product_color.value,product_type_id:e.ionicForm.controls.product_type_id.value.id,product_type_name:e.ionicForm.controls.product_type_id.value.product_type,picresizbase64List:e.ionicForm.controls.picresizbase64List.value,number_qty:0,highlight:!0}):e.configSv.ChkformAlert(n.message):"update"===i&&("ok"===n.status?e.data.filter(function(t){return t.id==n.id}).forEach(function(i){for(var n=0,o=Object.entries(i);n<o.length;n++){var r=t(o[n],2),c=r[0];r[1],i[c]="product_type_id"===c?e.ionicForm.controls[c].value.id:"product_type_name"===c?e.ionicForm.controls.product_type_id.value.product_type:"picresizbase64List"===c?e.ionicForm.controls.picresizbase64List.value:e.ionicForm.controls[c].value}}):e.configSv.ChkformAlert(n.message)),"ok"===n.status&&(e.configSv.ChkformAlert(n.message),e.refreshForm()))},function(t){console.log(JSON.stringify(t))})}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe()}},{key:"refreshForm",value:function(){this.ionicForm.reset(),this.isSubmitted=!1,this.picresizbase64Array.clear(),this.picpreview=[],this.indexpic=0}},{key:"loaddata",value:function(t,i){var e=this;this.sub=this.mtdSv.getmtd(7,t,this.limit).subscribe(function(t){null!==t&&(e.maxpadding=t.maxpadding,t.limit,e.data=e.data.concat(t.data_detail.map(function(t){return Object.assign({},t)})),i&&i.target.complete())})}},{key:"selectData",value:function(i){var e=this;this.picpreview=[],this.picresizbase64Array.clear(),this.data.filter(function(t){return t.id==i}).forEach(function(i){for(var n=function(){var i=t(r[o],2),n=i[0],c=i[1];if("product_type_id"===n){var a=e.ports.filter(function(t){return t.id===c})[0];e.portControl.setValue(a)}else"picresizbase64List"===n?(e.picpreview=Object(c).map(function(t){return Object.assign({},t)}),e.picpreview.forEach(function(t){e.indexpic++,e.picresizbase64Array.push(e.formBuilder.group({id:[t.id],url:[t.url]}))})):e.ionicForm.controls[n].setValue(c)},o=0,r=Object.entries(i);o<r.length;o++)n()})}},{key:"cancelData",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var e=this;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.alertCtrl.create({header:"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19\u0e01\u0e32\u0e23\u0e25\u0e1a\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25",message:"\u0e41\u0e19\u0e48\u0e43\u0e08\u0e27\u0e48\u0e32\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e25\u0e1a\u0e40\u0e25\u0e02\u0e23\u0e30\u0e1a\u0e1a\u0e17\u0e35\u0e48 "+t+" ? ",inputs:[{name:"cause",placeholder:"\u0e23\u0e30\u0e1a\u0e38\u0e40\u0e2b\u0e15\u0e38\u0e1c\u0e25\u0e43\u0e19\u0e01\u0e32\u0e23\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01"}],buttons:[{text:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",handler:function(t){console.log("cancel ",t)}},{text:"\u0e15\u0e01\u0e25\u0e07",handler:function(i){i.cause?e.sub=e.mtdSv.crudmtdproduct(t,"cancel",i.cause).subscribe(function(i){"ok"==i.status?(e.configSv.ChkformAlert(i.message),e.data=e.data.filter(function(i){return i.id!==t})):e.configSv.ChkformAlert(i.message)},function(t){console.log(JSON.stringify(t))},function(){e.refreshForm()}):e.configSv.ChkformAlert("\u0e01\u0e23\u0e38\u0e13\u0e32\u0e23\u0e30\u0e1a\u0e38\u0e40\u0e2b\u0e15\u0e38\u0e1c\u0e25\u0e43\u0e19\u0e01\u0e32\u0e23\u0e25\u0e1a\u0e14\u0e49\u0e27\u0e22")}}]});case 2:i.sent.present();case 3:case"end":return i.stop()}},i,this)}))}},{key:"doInfinite",value:function(t){this.page++,this.loaddata(this.page*this.limit,t),this.page===this.maxpadding&&(t.target.disabled=!0)}},{key:"addData",value:function(t){this.navCtrl.navigateForward(["/mtdproductdetail"],{queryParams:{value:JSON.stringify(this.data.filter(function(i){return i.id==t}))}})}},{key:"onClick_fileUpload",value:function(){this.fileIngimg.nativeElement.click()}},{key:"fileUpload_img",value:function(t){var i=t.srcElement.files[0];if(void 0!==i)if(i.type.match(/image.*/)){var e=new FileReader,n=this;e.onloadend=function(){var t=document.createElement("canvas"),i=t.getContext("2d");t.width=200,t.height=200;var o=new Image;o.src=e.result,o.onload=function(e){i.drawImage(o,0,0,o.width,o.height,0,0,t.width,t.height);var r=new Image;r.src=t.toDataURL(),n.picresizbase64=r.src,n.picpreview.push({id:n.indexpic,url:r.src}),n.picresizbase64Array.push(n.formBuilder.group({id:[n.indexpic],url:[n.picresizbase64]})),n.indexpic++}},e.readAsDataURL(i)}else alert("\u0e01\u0e23\u0e38\u0e13\u0e32\u0e23\u0e30\u0e1a\u0e38\u0e0a\u0e19\u0e34\u0e14\u0e44\u0e1f\u0e25\u0e4c\u0e23\u0e39\u0e1b\u0e20\u0e32\u0e1e")}},{key:"delImg",value:function(t){this.picpreview=this.picpreview.filter(function(i){return i.id!==t}),this.picresizbase64Array.removeAt(this.picresizbase64Array.value.findIndex(function(i){return i.id===t}))}},{key:"errorControl",get:function(){return this.ionicForm.controls}}])&&n(o.prototype,r),c&&n(o,c),i}(),k.\u0275fac=function(t){return new(t||k)(b.Kb(d.a),b.Kb(a.b),b.Kb(p.a),b.Kb(s.a),b.Kb(s.bb))},k.\u0275cmp=b.Eb({type:k,selectors:[["app-mtdproduct"]],viewQuery:function(t,i){var e;1&t&&b.Hc(g,!0),2&t&&b.pc(e=b.Zb())&&(i.fileIngimg=e.first)},decls:76,vars:11,consts:[["slot","start"],["slot","primary"],[3,"click"],["slot","icon-only","src","./assets/icons/refresh.svg"],["slot","icon-only","src","./assets/icons/save.svg"],["heading","\u0e41\u0e1a\u0e1a\u0e1f\u0e2d\u0e23\u0e4c\u0e21","id","tab1"],["novalidate","",3,"formGroup"],["fixed",""],["type","text","formControlName","id","disabled","",1,"IDnoshowBG"],["position","floating",1,"showlabel"],["formControlName","product_name","type","text"],["class","error",4,"ngIf"],["formControlName","product_desc","type","text"],["interface","floating","item-content","","formControlName","product_type_id","itemValueField","id","itemTextField","product_type","closeButtonText","\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",3,"items","canSearch"],["formControlName","product_pattern","type","text"],["formControlName","product_model","type","text"],["formControlName","product_color","type","text"],["type","file","id","file-input",2,"position","absolute","top","-999999px",3,"change"],["fileIngimg",""],["ion-button","",3,"click"],["style","display: inline-block;",4,"ngFor","ngForOf"],["heading","\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14","id","tab2"],["scrollY","true","id","myFixZone"],["placeholder","\u0e04\u0e49\u0e19\u0e2b\u0e32...","animated","true",3,"ngModel","ngModelChange"],[1,"content_alert"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."],[1,"error"],[2,"display","inline-block"],[2,"width","100px","height","100px",3,"src"],["slot","icon-only","size","small","name","trash"],[3,"ngClass","click"],["color","primary"],["slot","end","color","success"],["slot","end","name","add"],["color","danger",3,"click",4,"ngIf"],["color","danger",3,"click"],["slot","end","name","trash"]],template:function(t,i){1&t&&(b.Qb(0,"ion-header"),b.Qb(1,"ion-toolbar"),b.Qb(2,"ion-buttons",0),b.Lb(3,"ion-menu-button"),b.Pb(),b.Qb(4,"ion-title"),b.Bc(5,"\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25 \u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"),b.Pb(),b.Qb(6,"ion-buttons",1),b.Qb(7,"ion-button",2),b.Yb("click",function(){return i.refreshForm()}),b.Lb(8,"ion-icon",3),b.Pb(),b.Pb(),b.Qb(9,"ion-buttons",1),b.Qb(10,"ion-button",2),b.Yb("click",function(){return i.submitForm()}),b.Lb(11,"ion-icon",4),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(12,"ion-content"),b.Qb(13,"tabset"),b.Qb(14,"tab",5),b.Qb(15,"form",6),b.Qb(16,"ion-grid",7),b.Qb(17,"ion-row"),b.Qb(18,"ion-col"),b.Bc(19," \u0e40\u0e25\u0e02\u0e17\u0e35\u0e48\u0e23\u0e30\u0e1a\u0e1a "),b.Lb(20,"input",8),b.Pb(),b.Pb(),b.Qb(21,"ion-row"),b.Qb(22,"ion-col"),b.Qb(23,"ion-item"),b.Qb(24,"ion-label",9),b.Bc(25,"\u0e0a\u0e37\u0e48\u0e2d\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"),b.Pb(),b.Lb(26,"ion-input",10),b.zc(27,v,2,0,"span",11),b.Pb(),b.Pb(),b.Qb(28,"ion-col"),b.Qb(29,"ion-item"),b.Qb(30,"ion-label",9),b.Bc(31,"\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"),b.Pb(),b.Lb(32,"ion-input",12),b.Pb(),b.Pb(),b.Qb(33,"ion-col"),b.Qb(34,"ion-item"),b.Qb(35,"ion-label",9),b.Bc(36,"\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"),b.Pb(),b.Lb(37,"ionic-selectable",13),b.zc(38,y,2,0,"span",11),b.Pb(),b.Pb(),b.Pb(),b.Qb(39,"ion-row"),b.Qb(40,"ion-col"),b.Qb(41,"ion-item"),b.Qb(42,"ion-label",9),b.Bc(43,"\u0e41\u0e1a\u0e1a"),b.Pb(),b.Lb(44,"ion-input",14),b.Pb(),b.Pb(),b.Qb(45,"ion-col"),b.Qb(46,"ion-item"),b.Qb(47,"ion-label",9),b.Bc(48,"\u0e23\u0e38\u0e48\u0e19"),b.Pb(),b.Lb(49,"ion-input",15),b.Pb(),b.Pb(),b.Qb(50,"ion-col"),b.Qb(51,"ion-item"),b.Qb(52,"ion-label",9),b.Bc(53,"\u0e2a\u0e35"),b.Pb(),b.Lb(54,"ion-input",16),b.Pb(),b.Pb(),b.Pb(),b.Qb(55,"ion-row"),b.Qb(56,"ion-col"),b.Qb(57,"p"),b.Bc(58,"\u0e41\u0e19\u0e1a\u0e23\u0e39\u0e1b\u0e20\u0e32\u0e1e\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32 "),b.Qb(59,"input",17,18),b.Yb("change",function(t){return i.fileUpload_img(t)}),b.Pb(),b.Qb(61,"button",19),b.Yb("click",function(){return i.onClick_fileUpload()}),b.Bc(62,"Upload"),b.Pb(),b.Pb(),b.Qb(63,"div"),b.zc(64,_,4,1,"div",20),b.Pb(),b.Lb(65,"p"),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(66,"tab",21),b.Qb(67,"div",22),b.Qb(68,"ion-searchbar",23),b.Yb("ngModelChange",function(t){return i.filterTerm=t}),b.Pb(),b.Qb(69,"ion-list"),b.Qb(70,"div",24),b.Bc(71,"**\u0e08\u0e30\u0e25\u0e1a\u0e44\u0e14\u0e49\u0e01\u0e47\u0e15\u0e48\u0e2d\u0e40\u0e21\u0e37\u0e48\u0e2d \u0e22\u0e2d\u0e14\u0e04\u0e07\u0e40\u0e2b\u0e25\u0e37\u0e2d\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14\u0e40\u0e17\u0e48\u0e32\u0e01\u0e31\u0e1a 0"),b.Pb(),b.zc(72,Q,15,9,"ion-item-sliding",25),b.bc(73,"filter"),b.Pb(),b.Qb(74,"ion-infinite-scroll",26),b.Yb("ionInfinite",function(t){return i.doInfinite(t)}),b.Lb(75,"ion-infinite-scroll-content",27),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb()),2&t&&(b.zb(15),b.hc("formGroup",i.ionicForm),b.zb(12),b.hc("ngIf",i.isSubmitted&&(null==i.errorControl.product_name.errors?null:i.errorControl.product_name.errors.required)),b.zb(10),b.hc("items",i.ports)("canSearch",!0),b.zb(1),b.hc("ngIf",i.isSubmitted&&(null==i.errorControl.product_type_id.errors?null:i.errorControl.product_type_id.errors.required)),b.zb(26),b.hc("ngForOf",i.picpreview),b.zb(4),b.hc("ngModel",i.filterTerm),b.zb(4),b.hc("ngForOf",b.dc(73,8,i.data,i.filterTerm)))},directives:[s.p,s.U,s.h,s.F,s.T,s.g,s.q,s.m,f.c,f.a,a.m,a.i,a.d,s.o,s.L,s.l,a.a,a.h,a.c,s.v,s.B,s.u,s.ib,c.k,m.a,c.j,s.M,a.j,s.C,s.s,s.t,s.r,s.A,c.i,s.R,s.f,s.z,s.y],pipes:[h.a],styles:[""]}),k)}],z=((w=function t(){e(this,t)}).\u0275mod=b.Ib({type:w}),w.\u0275inj=b.Hb({factory:function(t){return new(t||w)},imports:[[l.j.forChild(C)],l.j]}),w),x=r("CH/f"),S=((F=function t(){e(this,t)}).\u0275mod=b.Ib({type:F}),F.\u0275inj=b.Hb({factory:function(t){return new(t||F)},imports:[[c.b,a.e,s.W,z,a.k,h.b,x.a,f.b]]}),F)}}])}();