<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="dismissModal()">
        <ion-icon slot="icon-only" name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>นัดรับของวันที่ {{recivedate}}</ion-title>
    <ion-buttons slot="primary" *ngIf="dataallarray.length>0">
      <ion-button (click)="submitForm()">
        <ion-icon slot="icon-only" src="./assets/icons/save.svg"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div>
    <ion-searchbar placeholder="ค้นหา..." [(ngModel)]="filterTerm" animated="true"></ion-searchbar>
    <ion-grid fixed>
      <ion-row>
        <ion-col>
          <ion-item>
            <ion-checkbox color="danger" [(ngModel)]="checkall" slot="start" (click)="selectDataAll()"></ion-checkbox>
            <ion-label>เลือกทั้งหมด</ion-label>
          </ion-item>
        </ion-col>
        <ion-col>
          <ion-item>
            <ion-label class="postatus_alert">มีรายการที่เลือก {{dataallarray.length}} รายการ</ion-label>
          </ion-item>
        </ion-col>
      </ion-row>
    </ion-grid>
    <ion-card *ngFor="let c of data  | filter:filterTerm;index as i">
      <ion-item >
        <ion-checkbox  color="dark"  (click)="selectData(i,data[i],c.status_checked)" [disabled]="c.disable_checked" [(ngModel)]="c.status_checked" slot="start"></ion-checkbox>
        <ion-row>
          <ion-col>
            <ion-label class="showlabelheader">{{ c.po_running }}</ion-label>
          </ion-col>
        </ion-row>
      </ion-item>
      <ion-item>
        <ion-grid fixed>
          <ion-row>
            <ion-col>
              <ion-label> <u class="showlabel">ผู้ขาย:</u> {{ c.name }}</ion-label>
            </ion-col>
            <ion-col>
              <ion-label> <u class="showlabel">Tel:</u> {{ c.po_customer_tel }}</ion-label>
            </ion-col>
            <ion-col>
              <ion-label> <u class="showlabel">วันที่สั่งซื้อ:</u> {{ c.po_date }}</ion-label>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-label> <u class="showlabel">ชื่อวิน:</u> {{ c.po_namewin }}</ion-label>
            </ion-col>
            <ion-col>
              <ion-label> <u class="showlabel">เขต:</u> {{ c.area_name }}</ion-label>
            </ion-col>
            <ion-col>
              <ion-label> <u class="showlabel">เบอร์/สี:</u> {{ c.podetail_number }}/{{ c.colorfront }}-{{ c.colorback }}</ion-label>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-label> <u class="showlabel">สินค้า:</u> {{ c.product_name }}</ion-label>
            </ion-col>
            <ion-col >
              <ion-label> <u class="showlabel">ขนาด:</u> {{ c.size }}</ion-label>
            </ion-col>
            <ion-col [style.background-color]="getColor(c.po_recivedate)">
              <ion-label> <u>วันนัดรับ:</u> {{ c.po_recivedate }}</ion-label>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-label> <u class="showlabel">สินค้าอื่นๆ:</u> {{ c.etc }}</ion-label>
            </ion-col>
            <ion-col>
              <ion-label> <u class="showlabel">หมายเหตุ:</u> {{ c.podetail_comment }}</ion-label>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-label> <u class="showlabel">สถานะปักเลข :</u> <span
                [ngClass]="{'postatus_alert': array_status.includes(c.poassign_number),'postatus_ok':!array_status.includes(c.poassign_number)}">
                {{ c.poassign_numbertxt }}</span></ion-label>
            </ion-col>
            <ion-col>
              <ion-label> <u class="showlabel">สถานะป้ายเขียว :</u> <span
                [ngClass]="{'postatus_alert': array_status.includes(c.poassign_green),'postatus_ok':!array_status.includes(c.poassign_green)}">
                {{ c.poassign_greentxt }}</span></ion-label>
            </ion-col>
            <ion-col>
              <ion-label> <u class="showlabel">สถานะประกอบ :</u> <span
                [ngClass]="{'postatus_alert': array_status.includes(c.poassign_install),'postatus_ok':!array_status.includes(c.poassign_install)}">
                {{ c.poassign_installtxt }}</span></ion-label>
            </ion-col>
          </ion-row>
          <ion-row  *ngIf="c.picresizbase64List.length > 0">
            <ion-col size="12">
              <div>
                <ion-row>
                  <ion-text color="primary">
                  ภาพประกอบ
                  </ion-text>
                </ion-row>
                <div >
                  <div  style="display: inline-block;" *ngFor="let img of c.picresizbase64List" >
                   <ion-img style="width: 100px; height: 100px;"  [src]="img.urlresize"></ion-img>
                   <ion-button *ngIf="img.detail_id !== undefined" (click)="showImg(img.detail_id,img.name)">
                    <ion-icon slot="icon-only" size="small" name="search"></ion-icon>
                  </ion-button>
                  </div>
                 </div>
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-item>
    </ion-card>
  </div>
</ion-content>
