<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>ติดตามงานประกอบ</ion-title>
  </ion-toolbar> 
</ion-header>
<form [formGroup]="ionicForm" novalidate>
  <ion-grid fixed>
    <ion-row>
      <ion-col>
        <ion-item>
          <ion-label class="showlabel" position="floating">ค้นหาวันที่นัดรับ</ion-label>
          <ion-input formControlName="po_assigndate" readonly [liIonic4Datepicker]="datePickerObj" type="text">
          </ion-input>
          <span class="error" *ngIf="isSubmitted && errorControl.po_assigndate.errors?.required">
            กรุณาระบุ คำค้นหา
          </span>
        </ion-item>
      </ion-col>
      <ion-col>
        <ion-button [disabled]="ionicForm.invalid" (click)="SearchData()" expand="block" shape="round">
          ค้นหาข้อมูล
        </ion-button>
      </ion-col>
      <ion-col>
        <ion-button (click)="loaddata(0)" expand="block" shape="round">
          ค้นหาข้อมูลที่ค้างทั้งหมด
        </ion-button>
      </ion-col>
    </ion-row>
    <ion-row class="content_alert" *ngIf="typesearch === true">
      <ion-col>
        พบข้อมูลที่ค้นหา จำนวน {{data.length}} ข้อมูล
      </ion-col>
    </ion-row>
  </ion-grid>
</form>
<ion-content>
  <div>
    <ion-searchbar placeholder="ค้นหา..." [(ngModel)]="filterTerm" animated="true"></ion-searchbar>
    <ion-card *ngFor="let c of data  | filter:filterTerm;index as i">
      <ion-row>
        <ion-col>
          <ion-item>
            <label class="showlabelheader2"> วันที่นัดรับ</label>&nbsp;&nbsp;&nbsp;&nbsp; <label>{{c.po_assign_date }}</label>
          </ion-item>
        </ion-col>
       
        <ion-col>
          <ion-item>
            <label class="showlabelheader2"> งานประกอบทั้งหมด </label>&nbsp;&nbsp;&nbsp;&nbsp;  <label>{{c.total }}</label>&nbsp;&nbsp;&nbsp;&nbsp; <label class="showlabelheader2">รายการ</label> 
            <ion-button fill="outline" slot="end" color="success" (click)="View(c.id,c.po_assign_date,c.seq,c.total,c.totalsus)">
              ดูรายละเอียด</ion-button>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-item>
            <label class="showlabelheader2"> งานประกอบที่รอ </label>&nbsp;&nbsp;&nbsp;&nbsp; <label>{{c.totalunsus }}</label>  &nbsp;&nbsp;&nbsp;&nbsp; <label class="showlabelheader2">รายการ</label>
          </ion-item>
        </ion-col>
        <ion-col>
          <ion-item>
            <label class="showlabelheader2"> งานประกอบที่เสร็จ </label>&nbsp;&nbsp;&nbsp;&nbsp; <label>{{c.totalsus }}</label>  &nbsp;&nbsp;&nbsp;&nbsp; <label class="showlabelheader2">รายการ</label>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-item>
          <ion-label> <u class="showlabelheader">สถานะ :</u> <span
            [ngClass]="{'postatus_alert': c.po_assign_status == 0,'status_ok0':c.po_assign_status == 2,'postatus_ok':c.po_assign_status == 1}">
            {{ c.po_statustext }}</span></ion-label>
        </ion-item>
      </ion-row>
    </ion-card>
  </div>
</ion-content>
 